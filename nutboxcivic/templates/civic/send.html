{% extends 'civic/base.html' %}

{% block title %}
Contact Representative - CivicConnect
{% endblock %}

{% block content %}
	<div class="row justify-content-center">
		<h1>{{ "Contact Representative" }}</h1>
	</div>
	{% comment %}<a href="{% url 'select' %}" class="card-link">Select template</a>{% endcomment %}
	<div class="row justify-content-center">
	<!--<form action="{% url 'send'%}" method="get">
		<br>
			<label for="templatelist">Choose your representative: </label>
			<select name='templatedropdown' id="templatelist" class="mdb-select md-form">
				<option value='' disabled selected hidden>---</option>
					<option value= '' >
						none
					</option>
				{% for rep in reps_all%}
					<option value= '{{rep.email}}' >
						{{ rep.name }}  :  {{ rep.party }}
					</option>
				{% endfor %}
				<input type="text" name="htmlid" value= '{{templateidvar}}' readonly>
			</select>
				
			<input type="submit" value="Select">
	</form>-->
	</div>

	<div class="row justify-content-center">
		<h3>Template Preview</h3>
		<textarea class="form-control" id="emailpreview" rows="16">{{chosentemplate}}</textarea>
		<button class="btn btn-primary mt-4 mr-2" onclick="copy()">Copy text</button>

		{% if generatedlink != '' %}
			<a class="btn btn-primary mt-4 ml-2" role="button" href='{{generatedlink}}'>Send Email</a>
		{% endif %}
	</div>

	<script>
		function copy() {
			var copyText = document.getElementById("emailpreview");
			copyText.select();
			copyText.setSelectionRange(0, 99999)
			document.execCommand("copy");
		}
	</script>
	
{% endblock %}
